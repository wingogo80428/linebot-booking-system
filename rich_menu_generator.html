
<!DOCTYPE html>
<html>
<head>
    <title>Rich Menu Generator - 6格版本</title>
    <style>
        body { margin: 0; padding: 20px; font-family: Arial, sans-serif; background: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        canvas { border: 2px solid #ddd; border-radius: 8px; }
        .download-btn {
            margin-top: 15px;
            padding: 12px 30px;
            background: linear-gradient(45deg, #00B900, #00A000);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(0,185,0,0.3);
            transition: all 0.3s;
        }
        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,185,0,0.4);
        }
        .info {
            margin-top: 15px;
            padding: 15px;
            background: #e8f5e8;
            border-radius: 8px;
            border-left: 4px solid #00B900;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>🎨 Rich Menu 圖片產生器 (6格版本)</h2>
        <p>包含QR Code領餐認證功能的專業設計</p>
        
        <canvas id="richMenuCanvas" width="2500" height="1686"></canvas>
        <br>
        <button class="download-btn" onclick="downloadImage()">📥 下載圖片 (rich_menu.png)</button>
        
        <div class="info">
            <h3>📋 功能說明：</h3>
            <ul>
                <li><strong>🚌 預約交通車</strong> - 選擇路線和班次</li>
                <li><strong>🍱 訂餐服務</strong> - 選擇取餐地點</li>
                <li><strong>📋 查看預約</strong> - 顯示當日預約記錄</li>
                <li><strong>❌ 取消預約</strong> - 取消交通車或訂餐</li>
                <li><strong>📱 QR Code</strong> - 生成領餐認證QR碼</li>
                <li><strong>🌐 語言設定</strong> - 切換中/英/越南文</li>
            </ul>
        </div>
    </div>
    
    <script>
        const canvas = document.getElementById('richMenuCanvas');
        const ctx = canvas.getContext('2d');
        
        // 設定漸層背景
        const gradient = ctx.createLinearGradient(0, 0, 0, 1686);
        gradient.addColorStop(0, '#f0f8ff');  // 淡藍色
        gradient.addColorStop(0.5, '#f8f0ff'); // 淡紫色
        gradient.addColorStop(1, '#fff8f0');   // 淡橙色
        ctx.fillStyle = gradient;
        ctx.fillRect(0, 0, 2500, 1686);
        
        // 畫分隔線
        ctx.strokeStyle = '#E0E0E0';
        ctx.lineWidth = 6;
        
        // 垂直分隔線
        ctx.beginPath();
        ctx.moveTo(833, 0);
        ctx.lineTo(833, 1686);
        ctx.stroke();
        
        ctx.beginPath();
        ctx.moveTo(1667, 0);
        ctx.lineTo(1667, 1686);
        ctx.stroke();
        
        // 水平分隔線
        ctx.beginPath();
        ctx.moveTo(0, 843);
        ctx.lineTo(2500, 843);
        ctx.stroke();
        
        // 設定陰影效果
        ctx.shadowColor = 'rgba(0, 0, 0, 0.1)';
        ctx.shadowBlur = 4;
        ctx.shadowOffsetY = 2;
        
        // 按鈕資料
        const buttons = [
            // 第一排
            { x: 416, y: 421, icon: '🚌', title: '預約交通車', en: 'Bus Booking', vi: 'Đặt xe buýt', color: '#4CAF50' },
            { x: 1250, y: 421, icon: '🍱', title: '訂餐服務', en: 'Meal Order', vi: 'Đặt cơm', color: '#FF9800' },
            { x: 2084, y: 421, icon: '📋', title: '查看預約', en: 'View Booking', vi: 'Xem đặt chỗ', color: '#2196F3' },
            
            // 第二排
            { x: 416, y: 1264, icon: '❌', title: '取消預約', en: 'Cancel', vi: 'Hủy đặt', color: '#F44336' },
            { x: 1250, y: 1264, icon: 'QR', title: 'QR Code', en: 'QR Code', vi: 'Mã QR', color: '#9C27B0' },
            { x: 2084, y: 1264, icon: '🌐', title: '語言設定', en: 'Language', vi: 'Ngôn ngữ', color: '#607D8B' }
        ];
        
        // 繪製每個按鈕
        buttons.forEach((btn, index) => {
            // 按鈕區域背景漸層
            const btnGradient = ctx.createRadialGradient(btn.x, btn.y - 50, 50, btn.x, btn.y - 50, 400);
            btnGradient.addColorStop(0, btn.color + '15'); // 15% 透明度
            btnGradient.addColorStop(1, btn.color + '05'); // 5% 透明度
            ctx.fillStyle = btnGradient;
            
            // 填滿整個按鈕區域
            if (index < 3) { // 第一排
                ctx.fillRect(index * 833 + (index > 0 ? 3 : 0), 0, index === 1 ? 834 : 833, 843);
            } else { // 第二排
                const col = index - 3;
                ctx.fillRect(col * 833 + (col > 0 ? 3 : 0), 843, col === 1 ? 834 : 833, 843);
            }
            
            // 超大背景圖示 (幾乎填滿格子)
            ctx.fillStyle = btn.color + '30'; // 30% 透明度，更明顯
            ctx.font = 'bold 650px Arial'; // 更大的背景圖示
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            
            if (btn.icon === 'QR') {
                // 為QR Code繪製超大的二維碼圖案
                drawQRCode(ctx, btn.x, btn.y - 50, btn.color + '30', 400);
            } else {
                ctx.fillText(btn.icon, btn.x, btn.y - 50);
            }
            
            // 移除前景小圖示，直接顯示文字
            
            // 主標題 (超大字體)
            ctx.fillStyle = '#1a1a1a';  
            ctx.font = 'bold 110px "Microsoft JhengHei", Arial'; // 從95px增加到110px
            ctx.strokeStyle = '#ffffff';
            ctx.lineWidth = 4;
            ctx.strokeText(btn.title, btn.x, btn.y - 20); // 調整位置，因為沒有前景圖示
            ctx.fillText(btn.title, btn.x, btn.y - 20);
            
            // 英文副標題 (放大)
            ctx.fillStyle = '#444444';
            ctx.font = 'bold 65px Arial'; // 從55px增加到65px
            ctx.strokeStyle = '#ffffff';
            ctx.lineWidth = 3;
            ctx.strokeText(btn.en, btn.x, btn.y + 60);
            ctx.fillText(btn.en, btn.x, btn.y + 60);
            
            // 越南文副標題 (放大)
            ctx.fillStyle = '#666666';
            ctx.font = 'bold 60px Arial'; // 從50px增加到60px
            ctx.strokeStyle = '#ffffff';
            ctx.lineWidth = 3;
            ctx.strokeText(btn.vi, btn.x, btn.y + 130);
            ctx.fillText(btn.vi, btn.x, btn.y + 130);
        });
        
        // 繪製QR Code的函數
        function drawQRCode(ctx, centerX, centerY, color, size = 200) {
            const gridSize = size / 21; // 21x21格子
            const startX = centerX - (gridSize * 10.5);
            const startY = centerY - (gridSize * 10.5);
            
            // QR Code 基本圖案 (簡化版本)
            const pattern = [
                [1,1,1,1,1,1,1,0,1,0,1,0,1,0,1,1,1,1,1,1,1],
                [1,0,0,0,0,0,1,0,0,1,0,1,0,0,1,0,0,0,0,0,1],
                [1,0,1,1,1,0,1,0,1,0,1,0,1,0,1,0,1,1,1,0,1],
                [1,0,1,1,1,0,1,0,0,1,1,1,0,0,1,0,1,1,1,0,1],
                [1,0,1,1,1,0,1,0,1,0,0,0,1,0,1,0,1,1,1,0,1],
                [1,0,0,0,0,0,1,0,0,1,0,1,0,0,1,0,0,0,0,0,1],
                [1,1,1,1,1,1,1,0,1,0,1,0,1,0,1,1,1,1,1,1,1],
                [0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0],
                [1,0,1,1,0,1,1,1,0,0,1,0,0,1,1,1,0,1,1,0,1],
                [0,1,0,0,1,0,0,0,1,1,0,1,1,0,0,0,1,0,0,1,0],
                [1,1,1,0,0,1,1,1,1,0,1,0,1,1,1,0,0,1,1,1,1],
                [0,0,0,1,1,0,0,0,0,1,1,1,0,0,0,1,1,0,0,0,0],
                [1,0,1,0,0,1,1,1,0,0,1,0,0,1,1,0,0,1,1,0,1],
                [0,0,0,0,0,0,0,0,1,1,0,1,1,0,1,1,0,0,0,1,0],
                [1,1,1,1,1,1,1,0,0,0,1,0,1,0,0,0,1,1,1,0,1],
                [1,0,0,0,0,0,1,0,1,1,1,1,0,1,1,0,0,0,0,1,1],
                [1,0,1,1,1,0,1,0,0,0,0,0,1,0,0,1,1,1,0,0,1],
                [1,0,1,1,1,0,1,0,1,1,0,1,0,1,1,0,1,1,1,1,0],
                [1,0,1,1,1,0,1,0,0,0,1,0,1,0,0,1,0,0,0,0,1],
                [1,0,0,0,0,0,1,0,1,1,1,1,0,1,1,0,1,0,1,1,0],
                [1,1,1,1,1,1,1,0,0,0,0,0,1,0,0,1,1,1,1,0,1]
            ];
            
            ctx.fillStyle = color;
            
            for (let i = 0; i < 21; i++) {
                for (let j = 0; j < 21; j++) {
                    if (pattern[i] && pattern[i][j] === 1) {
                        ctx.fillRect(
                            startX + j * gridSize,
                            startY + i * gridSize,
                            gridSize,
                            gridSize
                        );
                    }
                }
            }
        }
        
        // 重設陰影為原始狀態
        ctx.shadowColor = 'rgba(0, 0, 0, 0.1)';
        ctx.shadowBlur = 4;
        ctx.shadowOffsetY = 2;
        
        function downloadImage() {
            const link = document.createElement('a');
            link.download = 'rich_menu.png';
            
            // 壓縮圖片到1MB以下
            const compressedDataURL = canvas.toDataURL('image/jpeg', 0.8); // 80% 品質，減少檔案大小
            link.href = compressedDataURL;
            link.click();
            
            // 顯示成功訊息和檔案大小
            const sizeInBytes = Math.round((compressedDataURL.length - 'data:image/jpeg;base64,'.length) * 3/4);
            const sizeInKB = Math.round(sizeInBytes / 1024);
            
            const btn = document.querySelector('.download-btn');
            const originalText = btn.textContent;
            btn.textContent = `✅ 下載完成！檔案大小: ${sizeInKB}KB`;
            btn.style.background = sizeInKB < 1000 ? '#4CAF50' : '#FF5722';
            
            if (sizeInKB >= 1000) {
                setTimeout(() => {
                    alert('⚠️ 檔案大小超過1MB，請降低品質或簡化設計');
                }, 100);
            }
            
            setTimeout(() => {
                btn.textContent = originalText;
                btn.style.background = 'linear-gradient(45deg, #00B900, #00A000)';
            }, 3000);
        }
        
        console.log('🎨 Rich Menu 圖片已生成！點擊下載按鈕儲存圖片。');
        console.log('📱 包含QR Code領餐認證功能的6格專業設計');
    </script>
</body>
</html>
    